From 88c08676d321010e72aaadb5d42eca83ac6adf59 Mon Sep 17 00:00:00 2001
From: user <user@domain.com>
Date: Thu, 16 Oct 2025 21:29:01 +0800
Subject: [PATCH] [PATCH] ignore rename exception

---
 include/spdlog/sinks/rotating_file_sink-inl.h | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/include/spdlog/sinks/rotating_file_sink-inl.h b/include/spdlog/sinks/rotating_file_sink-inl.h
index ec9fa0f8..6347c9cc 100644
--- a/include/spdlog/sinks/rotating_file_sink-inl.h
+++ b/include/spdlog/sinks/rotating_file_sink-inl.h
@@ -156,9 +156,11 @@ SPDLOG_INLINE void rotating_file_sink<Mutex>::rotate_() {
                 file_helper_.reopen(
                     true);  // truncate the log file anyway to prevent it to grow beyond its limit!
                 current_size_ = 0;
-                throw_spdlog_ex("rotating_file_sink: failed renaming " + filename_to_str(src) +
-                                    " to " + filename_to_str(target),
-                                errno);
+                SPDLOG_TRY
+                {
+                    throw_spdlog_ex("rotating_file_sink: failed renaming " + filename_to_str(src) + " to " + filename_to_str(target), errno);
+                }
+                SPDLOG_CATCH_STD
             }
         }
     }
--
2.28.0.windows.1

